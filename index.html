<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Jリーグ年俸分析ツール（箱ひげ図）</title>
  <link rel="stylesheet" href="style.css">

  <!-- Plotly（箱ひげ図用） -->
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <!-- SheetJS（Excel読込用） -->
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
</head>
<body>
  <header>
    <h1>Jリーグ年俸分析ツール（箱ひげ図）</h1>
    <p class="subtitle">
      「順位・選手名・年齢・ポジション・チーム・年俸」の列をもつ
      Excelファイル（Jリーグ年俸.xlsx）をアップロードして分析します。
    </p>
  </header>

  <main>
    <!-- 1. ファイルアップロード -->
    <section class="panel">
      <h2>1. データのアップロード</h2>
      <p>Jリーグの年俸データ（.xlsx）ファイルを選択してください。</p>
      <input type="file" id="fileInput" accept=".xlsx,.xls" />
      <p class="note">
        使用する列名：<strong>ポジション</strong>・<strong>チーム</strong>・<strong>年俸</strong><br>
        列名はそのまま「ポジション」「チーム」「年俸」であることを想定しています。
      </p>
    </section>

    <!-- 2. 分析の視点と外れ値の扱い -->
    <section class="panel">
      <h2>2. 分析の視点と外れ値の扱い</h2>
      <div class="controls">
        <label for="groupBySelect">分析する単位：</label>
        <select id="groupBySelect">
          <option value="team">チーム別</option>
          <option value="position">ポジション別</option>
        </select>

        <label for="filterSelect">外れ値の扱い：</label>
        <select id="filterSelect">
          <option value="none">全データをそのまま使う</option>
          <option value="group-outliers">各グループの外れ値を除外する（IQR法）</option>
          <option value="top10">全体の年俸上位10名を除外する</option>
        </select>
      </div>
      <p id="modeDescription" class="note"></p>
    </section>

    <!-- 3. 箱ひげ図 -->
    <section class="panel">
      <h2>3. 箱ひげ図</h2>
      <div id="chart" class="chart-container">
        <!-- Plotly がここに描画されます -->
      </div>
    </section>

    <!-- 4. データプレビュー -->
    <section class="panel">
      <h2>4. 読み込んだデータの一部</h2>
      <p class="note">
        最初の数行だけを表示します（列名や読み込み確認用）。
      </p>
      <div id="previewTableWrapper" class="table-wrapper"></div>
    </section>

    <!-- 5. 外れ値 / 上位10名 一覧 -->
    <section class="panel">
      <h2>5. 外れ値・上位10名の一覧</h2>
      <p id="outlierNote" class="note"></p>
      <div id="outlierTableWrapper" class="table-wrapper"></div>
    </section>
  </main>

  <footer>
    <p>© Jリーグ年俸データ分析サンプル</p>
  </footer>

  <script src="script.js"></script>
</body>
</html>
